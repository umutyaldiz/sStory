(()=>{"use strict";var e={620:e=>{function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n,i="object"===("undefined"==typeof Reflect?"undefined":t(Reflect))?Reflect:null,r=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};n=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(n,i){function r(n){e.removeListener(t,s),i(n)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))}f(e,t,s,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&f(e,"error",t,{once:!0})}(e,r)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+t(e))}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function l(e,t,n,i){var r,s,o,a;if(u(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),o=s[t]),void 0===o)o=s[t]=n,++e._eventsCount;else if("function"==typeof o?o=s[t]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),(r=c(e))>0&&o.length>r&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,a=l,console&&console.warn&&console.warn(a)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function m(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=d.bind(i);return r.listener=n,i.wrapFn=r,r}function p(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):v(r,r.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function v(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function f(e,n,i,r){if("function"==typeof e.on)r.once?e.once(n,i):e.on(n,i);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+t(e));e.addEventListener(n,(function t(s){r.once&&e.removeEventListener(n,t),i(s)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,s=this._events;if(void 0!==s)i=i&&void 0===s.error;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var u=s[e];if(void 0===u)return!1;if("function"==typeof u)r(u,this,t);else{var c=u.length,l=v(u,c);for(n=0;n<c;++n)r(l[n],this,t)}return!0},o.prototype.addListener=function(e,t){return l(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return l(this,e,t,!0)},o.prototype.once=function(e,t){return u(t),this.on(e,m(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,m(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,i,r,s,o;if(u(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){o=n[s].listener,r=s;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,o||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,s=Object.keys(n);for(i=0;i<s.length;++i)"removeListener"!==(r=s[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},o.prototype.listeners=function(e){return p(this,e,!0)},o.prototype.rawListeners=function(e){return p(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},o.prototype.listenerCount=h,o.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=n(620),t=n.n(e);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=Object.assign({},t),this.start,this.remaining=this.options.time,this.callback=this.options.callback,this.resume()}var t,n;return t=e,(n=[{key:"pause",value:function(){window.clearTimeout(window.timerId),this.remaining-=Date.now()-this.start}},{key:"resume",value:function(){this.start=Date.now(),window.clearTimeout(window.timerId),window.timerId=window.setTimeout(this.callback,this.remaining)}},{key:"clear",value:function(){window.clearTimeout(window.timerId)}}])&&i(t.prototype,n),e}();function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"get",value:function(e){return localStorage.getItem(e)}},{key:"set",value:function(e,t){localStorage.setItem(e,t)}}])&&s(t.prototype,n),e}();function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=Object.assign({},t),this.mediaWrapper=document.querySelector(this.options.mediaWrapperClass)}var t,n;return t=e,(n=[{key:"clear",value:function(){this.videoClear(),this.mediaWrapper.innerHTML=""}},{key:"videoClear",value:function(){for(var e=this.mediaWrapper.querySelectorAll("video"),t=0,n=e.length;t<n;t++)e[t].pause(),e[t].currentTime=0,e[t].removeAttribute("src"),e[t].load()}},{key:"close",value:function(){this.mediaWrapper.classList.remove("active"),this.clear(),window.timerId&&window.clearTimeout(window.timerId)}}])&&a(t.prototype,n),e}();function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"get",value:function(e){}},{key:"post",value:function(e,t){fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){console.log("Success:",e)})).catch((function(e){console.error("Error:",e)}))}}])&&c(t.prototype,n),e}();function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(c,e);var t,n,i,s,a=(i=c,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(i);if(s){var n=v(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return h(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).defaults=e,t.options=Object.assign(t.defaults,e),t.mediaWrapper=document.querySelector(t.options.mediaWrapperClass),t.mediaItemClass=t.options.mediaItemClass,t.data=t.options.data,t.timer,t.currentItem=0,t.selectedItem=[],t.progressItem=[],t.currentVideo="",t.storage=new o,t.dataSend=new l,t.videoMute=t.storage.get("storyMuted"),t.mediaLoaded=!0,t.prevButton=document.createElement("button"),t.nextButton=document.createElement("button"),t.resumed=!1,t.paused=!1,t.modal=new u(t.options),t.init(),t}return t=c,(n=[{key:"buildItem",value:function(){var e=this,t=this,n=t.data,i=n.media;t.modal.clear();var r=document.createElement("div");r.className="media-wrapper";var s=document.createElement("div");s.className="items";var o=document.createElement("div");o.className="progress",s.appendChild(o);for(var a=0,u=i.length;a<u;a++){var c=document.createElement("span");c.className="progress-item";var l=document.createElement("span");l.style["-webkit-animation-duration"]=i[a].time+"s",c.appendChild(l),o.appendChild(c);var d=document.createElement("div");d.className=this.mediaItemClass,d.setAttribute("data-id",a);var m=t.buildCloseButton(),p=t.buildHead(n),h=t.buildBody(i[a]),v=t.buildButtons(i[a]),f=t.buildSharePopup(i[a].social);d.appendChild(m),d.appendChild(p),d.appendChild(h),d.appendChild(v),d.appendChild(f),s.appendChild(d),r.appendChild(s),a==u-1&&(this.prevButton=document.createElement("button"),this.prevButton.className="navigation prev-button",this.prevButton.innerHTML="Geri",this.prevButton.addEventListener("click",(function(){e.prev()})),this.nextButton=document.createElement("button"),this.nextButton.className="navigation next-button",this.nextButton.innerHTML="İleri",this.nextButton.addEventListener("click",(function(){e.next()})),s.appendChild(this.prevButton),s.appendChild(this.nextButton),t.append(r),t.open())}}},{key:"timeRelative",value:function(e){var t=36e5,n=864e5,i=2592e6,r=31536e6,s=new Date-new Date(parseInt(e));return s<6e4?Math.round(s/1e3)+" saniye önce":s<t?Math.round(s/6e4)+" dakika önce":s<n?Math.round(s/t)+" saat önce":s<i?Math.round(s/n)+" gün önce":s<r?Math.round(s/i)+" ay önce":Math.round(s/r)+" yıl önce"}},{key:"buildHead",value:function(e){var t=document.createElement("div");t.className="head";var n=document.createElement("div");n.className="head-info";var i=document.createElement("div");i.className="buttons";var r=document.createElement("span");r.className="cover";var s=document.createElement("img");s.src=e.cover;var o=document.createElement("div");o.className="story-info";var a=document.createElement("span");a.className="title",a.innerText=e.title;var u=document.createElement("span");return u.className="time",u.innerText=this.timeRelative(e.updateTime),o.appendChild(a),o.appendChild(u),r.appendChild(s),n.appendChild(r),n.appendChild(o),t.appendChild(n),t.appendChild(i),t}},{key:"buildCloseButton",value:function(){var e=this,t=document.createElement("div");t.className="close-button";var n=document.createElement("button");return n.className="close",n.innerHTML="Kapat",n.addEventListener("click",(function(){e.close()})),t.appendChild(n),t}},{key:"buildBody",value:function(e){var t=this,n=this,i=document.createElement("div");i.className="body";var r=document.createElement("div");r.className="media-item";var s=document.createElement("label");s.innerText=e.title;var o="";if("video"===e.type)(o=document.createElement("video")).muted=!0,o.autoplay=!1,o.setAttribute("webkit-playsinline",!0),o.setAttribute("playsinline",!0),o.preload="metadata",o.setAttribute("data-src",e.src);else if("image"===e.type||"survey"===e.type)(o=document.createElement("img")).src=e.src,o.onerror=function(){o.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjkiIGhlaWdodD0iMjUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CgogPGc+CiAgPHRpdGxlPmJhY2tncm91bmQ8L3RpdGxlPgogIDxyZWN0IGZpbGw9Im5vbmUiIGlkPSJjYW52YXNfYmFja2dyb3VuZCIgaGVpZ2h0PSI0MDIiIHdpZHRoPSI1ODIiIHk9Ii0xIiB4PSItMSIvPgogPC9nPgogPGc+CiAgPHRpdGxlPkxheWVyIDE8L3RpdGxlPgogIDxwYXRoIGlkPSJzdmdfMiIgZmlsbD0iI2ZmZmZmZiIgZD0ibTI2LjQ3NSwyLjk1Yy0yLjg4OSwtMi44ODkgLTcuNDAxLC0zLjE0NiAtMTAuNTksLTAuNzljMC4yNzcsMC40NTQgMC41NjMsMC45MDQgMC44MywxLjM2M2MwLjUyMywwLjg2OCAxLjAxMiwxLjc1MiAxLjQ5MywyLjYzOWMwLjQ5MywwLjg4MiAwLjk2OCwxLjc3MiAxLjQyNywyLjY2OWwwLjU2MywxLjA5OGwtMS4xODgsMC42NjhjLTIuMjQyLDEuMjYxIC00LjUyOSwyLjQzNSAtNi44MzgsMy41NjNjMC42MzksMi4xMTEgMS4yMzIsNC4yMzkgMS43NTEsNi4zOTFjMC4xNjksMC42MzkgMC4yOTgsMS4yOTEgMC40NDMsMS45MzZjMC4xNDMsMC42NDcgMC4yODksMS4yOTMgMC40MDYsMS45NDljMC4wOSwwLjQ2NCAwLjE3MSwwLjkzMiAwLjI1MywxLjM5OGMwLjI0OCwtMC4xOTYgMC40OTIsLTAuNDAzIDAuNzIxLC0wLjYzM2wxMC43MjksLTEwLjcyOWMzLjE4MSwtMy4xODEgMy4xODEsLTguMzQgMCwtMTEuNTIyeiIvPgogIDxwYXRoIGlkPSJzdmdfMyIgZmlsbD0iI2ZmZmZmZiIgZD0ibTEyLjY5NywyMy4wNDNjLTAuMjcxLC0wLjYwNCAtMC41NTksLTEuMjAyIC0wLjgwNywtMS44MTRjLTEuMDQ2LC0yLjQyOSAtMi4wMDcsLTQuODg3IC0yLjg4MywtNy4zNzJsLTAuNDE2LC0xLjE4MmwxLjE1NiwtMC42MDRjMi4yODUsLTEuMTkzIDQuNjA1LC0yLjMxNSA2Ljk1NSwtMy4zNzhjLTAuMiwtMC41MjQgLTAuNDA3LC0xLjA0NSAtMC41OTcsLTEuNTc1Yy0wLjM1MiwtMC45NDYgLTAuNjk3LC0xLjg5NiAtMS4wMDcsLTIuODYxYy0wLjEyNCwtMC4zNjUgLTAuMjMxLC0wLjczNyAtMC4zNDksLTEuMTA0bC0wLjI0MywwLjI0M2wtMC41NzIsLTAuNDQ2Yy0zLjE4MiwtMy4xODIgLTguNDY4LC0zLjE4MiAtMTEuNjUsMGMtMy4xODMsMy4xODIgLTMuMTE5LDguMzQxIDAuMDYzLDExLjUyMmwxMC43OTIsMTAuNzI5YzAuMjgyLDAuMjgxIDAuNjAzLDAuNTI5IDAuOTYyLDAuNzZjLTAuMTg4LC0wLjM3MSAtMC4zNzgsLTAuNzQyIC0wLjU2LC0xLjExNWMtMC4zLC0wLjU5NSAtMC41NjksLTEuMiAtMC44NDQsLTEuODAzeiIvPgogPC9nPgo8L3N2Zz4="};else if("twitter-embed"===e.type)(o=document.createElement("div")).className="twitter-embed",o.innerHTML=e.src;else if("youtube-embed"===e.type){(o=document.createElement("div")).className="youtube-embed";var a=document.createElement("div");a.className="embeded",a.innerHTML=e.src,o.appendChild(a)}if(r.appendChild(o),"twitter-embed"!=e.type&&r.appendChild(s),r.removeEventListener&&r.removeEventListener("click",(function(){})),r.addEventListener("click",(function(e){!t.pageCoordinate(e.pageX,e.pageY)&&t.mediaLoaded&&(n.resumed?(n.pause(),n.mediaPause()):(n.resume(),n.mediaPlay()))})),"survey"===e.type){var u=n.buildSurvey(e);i.appendChild(u)}return i.appendChild(r),i}},{key:"voteEvent",value:function(e,t){var n=e.target.value;this.dataSend.post(t.api,{id:t.id,value:n});var i=JSON.parse(this.storage.get("mediaWatchSet"))||[];if(i.length)for(var r=0,s=i.length;r<s;r++){var o=i[r];o.id==this.data.id&&(o.time=(new Date).getTime(),o.vote=!0)}this.storage.set("mediaWatchSet",JSON.stringify(i)),this.selectedItem.querySelector(".body .survey").remove(),this.selectedItem.querySelector(".body").appendChild(this.buildSurvey(t))}},{key:"buildSurvey",value:function(e){var t=this,n=e.survey,i=e.voted,r=document.createElement("div");r.className="survey";for(var s=0,o=n.length;s<o;s++){var a=n[s],u=document.createElement("button");u.className="button",u.setAttribute("value",a.value),u.style.color=a.textColor,u.style.backgroundColor=a.bgColor;var c=document.createElement("span"),l=a.vote,d=JSON.parse(this.storage.get("mediaWatchSet"))||[],m=!1;if(d.length)for(var p=0,h=d.length;p<h;p++){var v=d[p];v.id==this.data.id&&v.vote&&(m=!0)}i||m?(c.style.width=l,c.innerHTML="<i>"+l+"</i>"):u.addEventListener("click",(function(n){t.voteEvent(n,e)})),u.innerText=a.name,u.appendChild(c),r.appendChild(u)}return r}},{key:"pageCoordinate",value:function(e,t){var n=!1;return e<=50&&t>=100?(this.prev(),n=!0):e>=window.innerWidth-50&&t>=100&&(this.next(),n=!0),n}},{key:"buildButtons",value:function(e){var t=this,n=document.createElement("div");if(n.className="media-buttons","video"===e.type){var i=document.createElement("button");i.className="media-loading",i.innerHTML="<div></div><div></div><div></div><div></div>",n.appendChild(i);var r=document.createElement("button");r.className="sound",r.addEventListener("click",(function(){t.currentVideo.muted?(t.storage.set("storyMuted","false"),t.videoMute="false",t.currentVideo.muted=!1,r.innerText="Ses Kapat",r.classList.remove("off")):(t.storage.set("storyMuted","true"),t.videoMute="true",t.currentVideo.muted=!0,r.innerText="Ses Aç",r.classList.add("off"))})),n.appendChild(r)}var s=document.createElement("button");return s.className="share",s.innerText=this.options.language.sendLabel,s.addEventListener("click",(function(){t.selectedItem.querySelector(".popup").classList.toggle("active"),t.prevButton.classList.toggle("share-active"),t.nextButton.classList.toggle("share-active"),t.pause(),t.mediaPause()})),n.appendChild(s),n}},{key:"checkSocial",value:function(){var e=!1;return this.selectedItem.querySelectorAll(".popup .button.active").length?(this.selectedItem.querySelector(".popup .send").classList.add("active"),e=!0):this.selectedItem.querySelector(".popup .send").classList.remove("active"),e}},{key:"buildSharePopup",value:function(e){var t=this,n=document.createElement("div");n.className="popup";var i=document.createElement("button");i.className="close",i.innerHTML="Kapat",i.addEventListener("click",(function(){t.selectedItem.querySelector(".popup").classList.toggle("active"),t.prevButton.classList.toggle("share-active"),t.nextButton.classList.toggle("share-active"),t.resume(),t.mediaPlay()}));var r=document.createElement("label");r.innerHTML=this.options.language.sendLabel,n.appendChild(i),n.appendChild(r);for(var s=function(i,r){var s=e[i],o=t.buildSocialItem(s.type,s.text,s.shortLink);o.addEventListener("click",(function(){o.classList.toggle("active"),t.checkSocial()})),n.appendChild(o)},o=0,a=e.length;o<a;o++)s(o);var u=document.createElement("button");return u.className="send",u.innerHTML=this.options.language.sendButton,u.addEventListener("click",(function(){if(!t.checkSocial())return!1;for(var e=t.selectedItem.querySelectorAll(".popup .button.active button"),n=0,i=e.length;n<i;n++){var r=e[n].getAttribute("data-url");window.open(r,"_blank")}})),n.appendChild(u),n}},{key:"buildSocialItem",value:function(e,t,n){var i=document.createElement("div");i.className="button "+e;var r=document.createElement("button");return r.className="button-"+e,r.innerHTML=t,r.setAttribute("data-type",e),r.setAttribute("data-url",n),i.appendChild(r),i}},{key:"append",value:function(e){this.mediaWrapper.appendChild(e),this.start()}},{key:"open",value:function(){this.mediaWrapper.classList.add("active")}},{key:"close",value:function(){this.modal.close(),this.timer&&this.timer.clear()}},{key:"start",value:function(){var e=this,t=this,n=t.data.media;if(t.currentItem>n.length-1)return t.nextStory(),!1;if(t.currentItem<0)return t.prevStory(),!1;var i=n[t.currentItem].time;this.resumed=!0,this.paused=!1,window.clearTimeout(window.timerId),t.selectedItem=document.querySelectorAll("."+this.mediaItemClass)[t.currentItem],t.selectedItem.classList.add("active"),setTimeout((function(){t.selectedItem.querySelector(".media-item").classList.add("animation")}),25),t.progressItem=this.mediaWrapper.querySelectorAll(".progress .progress-item")[t.currentItem],t.progressItem.classList.add("active"),t.modal.videoClear(),"video"===n[t.currentItem].type?(this.soundButtonClass(),this.play()):("twitter-embed"===n[t.currentItem].type&&twttr&&twttr.widgets.load(),this.currentVideo=""),this.selectedItem.querySelector(".popup").classList.remove("active"),this.prevButton.classList.remove("share-active"),this.nextButton.classList.remove("share-active"),this.timer=new r({callback:function(){t.currentItem<n.length-1?e.next():t.nextStory()},time:1e3*i})}},{key:"play",value:function(){var e=this,t=this;this.modal.videoClear(),this.currentVideo=this.selectedItem.querySelector("video"),this.currentVideo.getAttribute("src")!=this.currentVideo.getAttribute("data-src")&&this.currentVideo.setAttribute("src",this.currentVideo.getAttribute("data-src")),this.currentVideo.onwaiting=function(){t.pause(),e.mediaLoaded=!1,e.selectedItem.querySelector(".media-loading").classList.add("active"),t.progressItem=t.mediaWrapper.querySelectorAll(".progress .progress-item")[t.currentItem],t.progressItem.classList.add("loading")},this.currentVideo.onplaying=function(){t.resume(),e.mediaLoaded=!0,e.selectedItem.querySelector(".media-loading").classList.remove("active"),t.progressItem=t.mediaWrapper.querySelectorAll(".progress .progress-item")[t.currentItem],t.progressItem.classList.remove("loading")};var n=this.currentVideo.play();void 0!==n&&n.then((function(e){})).catch((function(e){})),this.currentVideo.muted="false"!=this.videoMute}},{key:"soundButtonClass",value:function(){var e=this.selectedItem.querySelector(".media-buttons .sound");"false"==this.videoMute?(e.innerText="Ses Kapat",e.classList.remove("off")):(e.innerText="Ses Aç",e.classList.add("off"))}},{key:"mediaPlay",value:function(){this.currentVideo&&this.currentVideo.paused&&this.currentVideo.play()}},{key:"mediaPause",value:function(){this.currentVideo&&(this.currentVideo.paused||this.currentVideo.pause())}},{key:"resume",value:function(){this.timer.resume(),this.resumed=!0,this.paused=!1,this.itemClassControl(!0),this.progressClassControl(!0)}},{key:"pause",value:function(){this.timer.pause(),this.resumed=!1,this.paused=!0,this.itemClassControl(!1),this.progressClassControl(!1)}},{key:"itemClassControl",value:function(e){e?this.selectedItem.classList.remove("pause"):this.selectedItem.classList.add("pause")}},{key:"progressClassControl",value:function(e){e?this.progressItem.classList.remove("pause"):this.progressItem.classList.add("pause")}},{key:"next",value:function(){this.selectedItem.classList.remove("active"),this.selectedItem.querySelector(".media-item").classList.remove("animation"),this.selectedItem.classList.remove("pause"),this.selectedItem.classList.add("seen"),this.progressItem.classList.remove("active"),this.progressItem.classList.remove("pause"),this.progressItem.classList.remove("loading"),this.progressItem.classList.add("seen"),this.currentItem++,this.start()}},{key:"prev",value:function(){this.selectedItem.classList.remove("active"),this.selectedItem.querySelector(".media-item").classList.remove("animation"),this.selectedItem.classList.remove("pause"),this.selectedItem.classList.remove("seen"),this.progressItem.classList.remove("active"),this.progressItem.classList.remove("pause"),this.progressItem.classList.remove("loading"),this.progressItem.classList.remove("seen"),this.currentItem--,this.currentItem>=0&&(this.selectedItem=document.querySelectorAll("."+this.mediaItemClass)[this.currentItem],this.selectedItem.classList.remove("seen"),this.progressItem=this.mediaWrapper.querySelectorAll(".progress .progress-item")[this.currentItem],this.progressItem.classList.remove("seen")),this.start()}},{key:"nextStory",value:function(){this.emit("nextStory")}},{key:"prevStory",value:function(){this.emit("prevStory")}},{key:"keydown",value:function(){var e=this;document.onkeydown=function(t){document.querySelector(e.options.mediaWrapperClass).classList.contains("active")&&(27===(t=t||window.event).keyCode?e.close():39===t.keyCode?e.next():37===t.keyCode?e.prev():38===t.keyCode||40===t.keyCode&&e.close())}}},{key:"init",value:function(){this.data?(this.buildItem(),this.keydown()):this.close()}}])&&m(t.prototype,n),c}(t());function y(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var g=function(){function e(){var t,n,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=function(e){if(i.xDown&&i.yDown){var t=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY,r=i.xDown-t,s=i.yDown-n,o="";return Math.abs(r)>Math.abs(s)?r>i.bounce?o="left":r<-Math.abs(i.bounce)&&(o="right"):s>i.bounce?o="up":s<-Math.abs(i.bounce)&&(o="down"),i.xDown=null,i.yDown=null,o}},(t="handleTouchMove")in this?Object.defineProperty(this,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[t]=n,this.xDown=null,this.yDown=null,this.bounce=100}var t,n;return t=e,(n=[{key:"handleTouchStart",value:function(e){var t=e.touches||e.originalEvent.touches;this.xDown=t[0].clientX,this.yDown=t[0].clientY}}])&&y(t.prototype,n),e}();function L(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),b(this,"handleNext",(function(){n.currentIndex++,n.handleClick(n.currentIndex)})),b(this,"handlePrev",(function(){n.currentIndex--,n.handleClick(n.currentIndex)})),this.default={thumbWrapperClass:".sStory-thumb-wrapper",thumbItemClass:"item",mediaWrapperClass:".sStory-media-wrapper",mediaItemClass:"media",language:{button:"Detaylı Bilgi",sendLabel:"Paylaş",sendButton:"Gönder"}},this.options=Object.assign(this.default,t),this.thumbWrapper=document.querySelector(this.options.thumbWrapperClass),this.thumbItemClass=this.options.thumbItemClass,this.data=this.options.data,this.currentIndex=0,this.storage=new o,this.swipe="",this.media="",this.modal=new u(this.options),this.init()}var t,n;return t=e,(n=[{key:"buildItem",value:function(){var e=this,t=this.data,n=this;n.destroy();for(var i=function(i,r){var s=document.createElement("div");s.className=e.thumbItemClass+(e.checkSeen(t[i])?" seen":""),s.setAttribute("data-id",t[i].id);var o=document.createElement("div");o.className="img";var a=document.createElement("img");a.src=t[i].cover,o.appendChild(a);var u=document.createElement("span");u.className="title",u.innerText=t[i].title,s.appendChild(o),s.appendChild(u),s.addEventListener("click",(function(){e.handleClick(i)})),n.append(s)},r=0,s=t.length;r<s;r++)i(r)}},{key:"handleClick",value:function(e){this.currentIndex=e,this.media="",this.media=new f({data:this.data[this.currentIndex],mediaWrapperClass:this.options.mediaWrapperClass,mediaItemClass:this.options.mediaItemClass,language:this.options.language}),this.media.on("nextStory",this.handleNext),this.media.on("prevStory",this.handlePrev),this.data[this.currentIndex]&&this.storySessionList()}},{key:"storySessionList",value:function(){var e=this,t=[],n=!0;if((t=JSON.parse(this.storage.get("mediaWatchSet"))||[]).length)for(var i=0,r=t.length;i<r;i++){var s=t[i];s.id==this.data[this.currentIndex].id&&(s.time=(new Date).getTime(),n=!1),i==t.length-1&&n&&t.push({id:this.data[this.currentIndex].id,title:this.data[this.currentIndex].title,time:(new Date).getTime()})}else t.push({id:this.data[this.currentIndex].id,title:this.data[this.currentIndex].title,time:(new Date).getTime()});this.storage.set("mediaWatchSet",JSON.stringify(t)),setTimeout((function(){e.buildItem()}),600)}},{key:"append",value:function(e){this.thumbWrapper.appendChild(e)}},{key:"destroy",value:function(){this.thumbWrapper.innerHTML=""}},{key:"checkSeen",value:function(e){var t=!1,n=JSON.parse(this.storage.get("mediaWatchSet"))||[];if(n.length)for(var i=0,r=n.length;i<r;i++){var s=n[i];s.id==e.id&&new Date(parseInt(e.updateTime))<new Date(parseInt(s.time))&&(t=!0)}return t}},{key:"close",value:function(){this.modal.close()}},{key:"dimension",value:function(){var e=this;document.querySelector(this.options.mediaWrapperClass).addEventListener("touchstart",(function(t){e.swipe.handleTouchStart(t)}),!1),document.querySelector(this.options.mediaWrapperClass).addEventListener("touchend",(function(t){var n=e.swipe.handleTouchMove(t);"left"==n?e.handleNext():"right"==n?e.handlePrev():"up"==n||"down"==n&&e.close()}),!1)}},{key:"init",value:function(){this.buildItem(),this.swipe=new g,this.dimension()}}])&&L(t.prototype,n),e}();function C(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var M=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=Object.assign({},t),this.init()}var t,n;return t=e,(n=[{key:"init",value:function(){new w(this.options)}}])&&C(t.prototype,n),e}();window.sStory=M})()})();